<!doctype html><html lang=en-us><head><title>KevCaz's Website</title><link rel=stylesheet href=https://kevcaz.github.io/css/main.min.3e80b0b98262c741b43d007658694cef81a3cfc7dbbc04ceb03844577b3a225c.css media=screen><link rel=stylesheet href=../../../css/perso.css><link rel=stylesheet href=../../../css/family.css><meta name=author content="Kevin Cazelles"><meta name=institution content="Department of Integrated Biology, University of Guelph"><meta name=news_keywords content="[R mv rename]"><meta property="og:site_name" content="KevCaz's Website"><meta property="og:title" content="Renaming files with `mv`, `rename`  and `R`"><meta property="og:image" content="https://kevcaz.github.io/img/imgOG/kevcaz_og.png"><meta property="og:description" content="Kevin Cazelles's website"></head><body><div class=page><div class=ctn-sidebar-primary><div class=ctt-sidebar-primary><h1>KevCaz's Website</h1><div class=primary-sidebar-premenu><h2><i class="fas fa-align-center"></i><button onclick="dropDown('p-s-menu')"> Menu</button></h2></div><div class=primary-sidebar-menu id=p-s-menu><h2><a href=../../../><i class="fas fa-home"></i>Home</a></h2><h2><a href=../../../about/><i class="fas fa-id-card"></i>About</a></h2><h2><a onclick="dropDown('dropdown-research')" href=javascript:void(0)><i class="fas fa-microscope"></i>Research</a></h2><div class=dropdown id=dropdown-research><h3><a href=../../../projects/>Projects</a></h3><h3><a href=../../../publications/>Publications</a></h3><h3><a href=../../../software/>Software</a></h3><h3><a href=../../../talks/>Talks & Posters</a></h3><h3><a href=../../../teaching/>Teaching</a></h3><h3><a href=../../../resume/>Resume</a></h3></div><h2 id=current-dropdown><a onclick="dropDown('dropdown-blog')" href=javascript:void(0)><i class="fas fa-blog"></i>Blog</a></h2><div class=dropdown-current id=dropdown-blog><h3><a href=../../../econotes/>EcoNotes</a></h3><h3 id=current><a href=../../../notes/>SilicoNotes</a></h3><h3><a href=https://insileco.github.io/>inSileco</a></h3></div><h2><a onclick="dropDown('dropdown-perso')" href=javascript:void(0)><i class="fas fa-person-booth"></i>Personal stuff</a></h2><div class=dropdown id=dropdown-perso><h3><a href=../../../perso/books>Books I read and liked</a></h3><h3><a href=../../../perso/movies>Movies I watched and liked</a></h3><h3><a href=../../../perso/opinions>Opinions I dare to share</a></h3><h3><a href=../../../perso/famille>Even more personal</a></h3></div></div><div class=footer><hr id=hr-footer align=left><div class=social-media-banner><a href=https://github.com/KevCaz><i class="fab fab fa-github-square"></i></a><a href=https://stackoverflow.com/users/8038778><i class="fab fa-stack-overflow"></i></a><a href=https://twitter.com/KCazelles><i class="fab fa-twitter-square"></i></a><a href=http://orcid.org/0000-0001-6619-9874><i class="ai ai-orcid-square"></i></a><a href="https://scholar.google.ca/citations?user=xzvcu7cAAAAJ%26hl"><i class="ai ai-google-scholar-square"></i></a><a href=https://www.researchgate.net/profile/Kevin_Cazelles><i class="ai ai-researchgate-square"></i></a><a href=https://kevcaz.github.io/index.xml><i class="fas fa-rss-square"></i></a></div><div class=footer-custom>Website built with <a href=https://gohugo.io/>Hugo</a>.<br><i class="fas fa-code"></i>available on <a href=https://github.com/KevCaz/KevCaz.github.io><i class="fab fa-github"></i></a>.<br>Content under <a href=https://creativecommons.org/publicdomain/zero/1.0><i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-zero"></i></a>unless otherwise specified.</div></div></div></div><div class=ctn-main-content><div class=ctt-main-content><div class=article-meta><h1 id=title>Renaming files with <code>mv</code>, <code>rename</code> and <code>R</code></h1><h3 class=date>September 8, 2020<div class=tags><i class="fas fa-tags" aria-hidden=true></i>&nbsp;
<a href=../../../tags/r><kbd class=item-tag>R</kbd></a>
<a href=../../../tags/mv><kbd class=item-tag>mv</kbd></a>
<a href=../../../tags/rename><kbd class=item-tag>rename</kbd></a></div></div><div class=article-main><p>For a project I have been working on for quite some time now, I ended up
handling thousands of files and as I initially named them poorly, I had to
rename a bunch of them&mldr; Basically, I needed to do two kind of file name
manipulations.</p><ol><li><p><strong>problem 1</strong> is kind of trivial : replacing the same part of the
file names by another, e.g. renaming <code>res_old1_001.txt</code>, <code>res_old1_002.txt</code>, &mldr;,
<code>res_old1_010.txt</code> to <code>res_new2_001.txt</code>, <code>res_new2_002.txt</code>, &mldr;,
<code>res_new2_010.txt</code>.</p></li><li><p><strong>problem 2</strong> is somewhat trickier as the parts to be replaced vary from a
file to another and so are the replacing parts. This happens when you have
numbers in your file names and want to increase or decrease those numbers by a
fixed amount, e.g. renaming <code>res_simu1_001.txt</code>, <code>res_simu1_002.txt</code>, &mldr;,
<code>res_simu1_010.txt</code> to <code>res_simu1_021.txt</code>, <code>res_simu1_022.txt</code>, &mldr;,
<code>res_simu1_030.txt</code> (i.e., adding 20 to the last part of the file name).</p></li></ol><p>In what follows I show how I solved these issues with <code>mv</code>, <code>rename</code> and <i class="fab fa-r-project"></i>, but keep in mind that there are various ways to
do this in many (if not all) programming languages.</p><h2 id=using-bash-commands-to-solve-problem-1>Using bash commands to solve <strong>problem 1</strong></h2><p>On Unix systems, the <a href=https://shapeshed.com/unix-mv/>command <code>mv</code></a> allows you
to rename and relocate a file pretty easily<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> : all you have to do is to
give the current path to the file to be renames and the new one, like so: <code>mv path1/name1.txt path2/name2.txt</code>. In order to rename a bunch files, you can
write a small bash script. For instance, the following lines solve <strong>problem 1</strong>:</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#ff79c6>for</span> i in <span style=color:#ff79c6>{</span>001..10<span style=color:#ff79c6>}</span>
<span style=color:#ff79c6>do</span>
mv <span style=color:#f1fa8c>&#39;/path/to/folder1/res_old1_&#39;</span><span style=color:#8be9fd;font-style:italic>$i</span><span style=color:#f1fa8c>&#39;.txt&#39;</span> <span style=color:#f1fa8c>&#39;/path/to/folder2/res_new2_&#39;</span><span style=color:#8be9fd;font-style:italic>$i</span><span style=color:#f1fa8c>&#39;.txt&#39;</span>
<span style=color:#ff79c6>done</span>
</code></pre></td></tr></table></div></div><p>Another option is to use <a href=https://packages.debian.org/stretch/rename><code>rename</code></a>,
which is a command line tool based on a <a href=https://www.perl.org/>perl</a> package.
What I like about it is that you can rename file in a very similar fashion that
you replace character strings with the stream editor
<a href=https://www.gnu.org/software/sed/manual/sed.html>sed</a>.</p><p>Below I install <code>rename</code> and use it to solve <strong>problem 1</strong>:</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ apt-get install rename
$ rename <span style=color:#f1fa8c>&#39;s/old1/new2/&#39;</span> /path/to/folder1/res_old1_*.txt
</code></pre></td></tr></table></div></div><p>For more examples, see this post/tutorial on
<a href=https://www.computerhope.com/unix/rename.htm>computerhope</a>.</p><h2 id=using-r-to-solve-problem-2>Using R to solve <strong>problem 2</strong></h2><p>Below, I use <i class="fab fa-r-project"></i>to solve <strong>problem 2</strong>. I would
like to stress that I am using <i class="fab fa-r-project"></i>simply because I
am more confortable doing this manipulation with R. Obviously there are
ways of accomplishing this with many programming language and I believe that
this is totally doable with <code>rename</code>. That being said, this is also a good
opportunity to exemplify how to use <i class="fab fa-r-project"></i>can to
rename files.</p><p>First, let's list the in <code>/path/to/folder1/</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-R data-lang=R>R<span style=color:#ff79c6>&gt;</span> fls <span style=color:#ff79c6>&lt;-</span> <span style=color:#50fa7b>list.files</span>(<span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>/path/to/folder1/&#34;</span>, recursive <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>TRUE</span>, full.names <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>TRUE</span>)
R<span style=color:#ff79c6>&gt;</span> <span style=color:#50fa7b>head</span>(fls)
[1] <span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>/path/to/folder1/res_simu1_001.txt&#34;</span>
[2] <span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>/path/to/folder1/res_simu1_002.txt&#34;</span>
[3] <span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>/path/to/folder1/res_simu1_003.txt&#34;</span>
[4] <span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>/path/to/folder1/res_simu1_004.txt&#34;</span>
[5] <span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>/path/to/folder1/res_simu1_005.txt&#34;</span>
[6] <span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>/path/to/folder1/res_simu1_006.txt&#34;</span>
</code></pre></td></tr></table></div></div><p>Note that I purposely changed the original long path to <code>/path/to/folder1/</code> for
the sake of clarity. So now what I am looking for is to rename
<code>res_simu1_01.txt</code> to <code>res_simu1_21.txt</code>, <code>res_simu1_02.txt</code> to
<code>res_simu1_22.txt</code> and so forth. To do so, I need to extract the number add 20
and then rename the file, and I wrote the following function that does the job!</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-R data-lang=R>R<span style=color:#ff79c6>&gt;</span> myrename <span style=color:#ff79c6>&lt;-</span> <span style=color:#50fa7b>function</span>(x, offset) {
R<span style=color:#ff79c6>&gt;</span>   <span style=color:#6272a4># this is one way to extract the number identifying </span>
R<span style=color:#ff79c6>&gt;</span>   <span style=color:#6272a4># this would work even if there are numbers in the name of your files</span>
R<span style=color:#ff79c6>&gt;</span>   val <span style=color:#ff79c6>&lt;-</span> <span style=color:#50fa7b>sub</span>(<span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>^.*_([0-9]{3})\\.txt$&#34;</span>, <span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>\\1&#34;</span>, x)
R<span style=color:#ff79c6>&gt;</span>   <span style=color:#6272a4># add 20 and get a character string correclty formatted</span>
R<span style=color:#ff79c6>&gt;</span>   rep <span style=color:#ff79c6>&lt;-</span> <span style=color:#50fa7b>sprintf</span>(<span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>%03d&#34;</span>, <span style=color:#50fa7b>as.numeric</span>(val) <span style=color:#ff79c6>+</span> offset)
R<span style=color:#ff79c6>&gt;</span>   <span style=color:#6272a4># rename files</span>
R<span style=color:#ff79c6>&gt;</span>   <span style=color:#50fa7b>file.rename</span>(x, <span style=color:#50fa7b>sub</span>(<span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>[0-9]{3}&#34;</span>, rep, x))
R<span style=color:#ff79c6>&gt;</span> }
</code></pre></td></tr></table></div></div><p>where <code>x</code> is a file name and <code>offset</code> allows one to chose the number to be added. So, in order to solve <strong>problem 2</strong>, I can use <code>apply()</code> as follows :</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-R data-lang=R>R<span style=color:#ff79c6>&gt;</span> <span style=color:#50fa7b>lapply</span>(fls, myrename, <span style=color:#bd93f9>20</span>)
</code></pre></td></tr></table></div></div><p>And I can actually add any number, including negative ones. That said, with this
solution it may be important to ensure that numbers obtained after addition
remain within [0; 1000], otherwise you may not obtain what you were looking
for. Even more important, you should check whether new files names are existing
file name, cause this could be quite problematic. For instance, in the example
above, if I were to use <code>lapply(fls, myrename, 5)</code>, then <code>res_simu1_01.txt</code>
would be renamed <code>res_simu1_06.txt</code> and as <code>res_simu1_01.txt</code> is the first file
to be renamed, <code>res_simu1_06.txt</code> would be overwritten. One way to avoid this is
to change the order in which files are handled, e.g.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-R data-lang=R>R<span style=color:#ff79c6>&gt;</span> <span style=color:#50fa7b>lapply</span>(fls[6<span style=color:#ff79c6>:</span><span style=color:#bd93f9>10</span>], myrename, <span style=color:#bd93f9>5</span>)
R<span style=color:#ff79c6>&gt;</span> <span style=color:#50fa7b>lapply</span>(fls[1<span style=color:#ff79c6>:</span><span style=color:#bd93f9>5</span>], myrename, <span style=color:#bd93f9>5</span>)
</code></pre></td></tr></table></div></div><p>Here, <code>myrename()</code> was designed specifically to solve <strong>problem 2</strong> but it
would be relatively easy to make it more general, that is writing a few extra
lines to handle a wider range of patterns and to check for potential problems
while renaming (e.g. the one I just described).</p><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p>There are several comprehensive tutorials available on line that
illustrate how to use the <code>mv</code> command, for instance <a href=https://linuxize.com/post/how-to-rename-files-in-linux/>this one on Linuxize</a>. <a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section></div></div><div class=footer2><hr id=hr-footer align=left><div class=social-media-banner><a href=https://github.com/KevCaz><i class="fab fab fa-github-square"></i></a><a href=https://stackoverflow.com/users/8038778><i class="fab fa-stack-overflow"></i></a><a href=https://twitter.com/KCazelles><i class="fab fa-twitter-square"></i></a><a href=http://orcid.org/0000-0001-6619-9874><i class="ai ai-orcid-square"></i></a><a href="https://scholar.google.ca/citations?user=xzvcu7cAAAAJ%26hl"><i class="ai ai-google-scholar-square"></i></a><a href=https://www.researchgate.net/profile/Kevin_Cazelles><i class="ai ai-researchgate-square"></i></a><a href=https://kevcaz.github.io/index.xml><i class="fas fa-rss-square"></i></a></div><div class=footer-custom>Website built with <a href=https://gohugo.io/>Hugo</a>.<br><i class="fas fa-code"></i>available on <a href=https://github.com/KevCaz/KevCaz.github.io><i class="fab fa-github"></i></a>.<br>Content under <a href=https://creativecommons.org/publicdomain/zero/1.0><i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-zero"></i></a>unless otherwise specified.</div></div></div><div class=ctn-sidebar-secondary><div class=ctt-sidebar-secondary><h1><a href=#><i class="far fas fa-chevron-up"></i></a></h1><script src=../../../js/sidebar-secondary.js></script><h1><a onclick=scrollToBottom()><i class="far fas fa-chevron-down"></i></a></h1></div></div></div><script src=../../../js/sidebar-primary-dropdown.js></script><script>scrollingElement=(document.scrollingElement||document.body)
function scrollToBottom(){scrollingElement.scrollTop=scrollingElement.scrollHeight;}</script></body></html>