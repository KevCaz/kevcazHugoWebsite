<!doctype html><html lang=en-us><head><title>KevCaz's Website</title><link rel=stylesheet href=https://kevcaz.github.io/css/main.min.3e80b0b98262c741b43d007658694cef81a3cfc7dbbc04ceb03844577b3a225c.css media=screen><link rel=stylesheet href=../../../css/perso.css><link rel=stylesheet href=../../../css/family.css><meta name=author content="Kevin Cazelles"><meta name=institution content="Department of Integrated Biology, University of Guelph"><meta name=news_keywords content="[Linux Debian Testing boot BIOS UEFI GRUB2]"><meta property="og:site_name" content="KevCaz's Website"><meta property="og:title" content="Cannot boot again `[SOLVED]`"><meta property="og:image" content="https://kevcaz.github.io/img/imgOG/kevcaz_og.png"><meta property="og:description" content="Kevin Cazelles's website"></head><body><div class=page><div class=ctn-sidebar-primary><div class=ctt-sidebar-primary><h1>KevCaz's Website</h1><div class=primary-sidebar-premenu><h2><i class="fas fa-align-center"></i><button onclick="dropDown('p-s-menu')"> Menu</button></h2></div><div class=primary-sidebar-menu id=p-s-menu><h2><a href=../../../><i class="fas fa-home"></i>Home</a></h2><h2><a href=../../../about/><i class="fas fa-id-card"></i>About</a></h2><h2><a onclick="dropDown('dropdown-research')" href=javascript:void(0)><i class="fas fa-microscope"></i>Research</a></h2><div class=dropdown id=dropdown-research><h3><a href=../../../projects/>Projects</a></h3><h3><a href=../../../publications/>Publications</a></h3><h3><a href=../../../software/>Software</a></h3><h3><a href=../../../talks/>Talks & Posters</a></h3><h3><a href=../../../teaching/>Teaching</a></h3><h3><a href=../../../resume/>Resume</a></h3></div><h2 id=current-dropdown><a onclick="dropDown('dropdown-blog')" href=javascript:void(0)><i class="fas fa-blog"></i>Blog</a></h2><div class=dropdown-current id=dropdown-blog><h3><a href=../../../econotes/>EcoNotes</a></h3><h3 id=current><a href=../../../notes/>SilicoNotes</a></h3><h3><a href=https://insileco.github.io/>inSileco</a></h3></div><h2><a onclick="dropDown('dropdown-perso')" href=javascript:void(0)><i class="fas fa-person-booth"></i>Personal stuff</a></h2><div class=dropdown id=dropdown-perso><h3><a href=../../../perso/books>Books I read and liked</a></h3><h3><a href=../../../perso/movies>Movies I watched and liked</a></h3><h3><a href=../../../perso/opinions>Opinions I dare to share</a></h3><h3><a href=../../../perso/famille>Even more personal</a></h3></div></div><div class=footer><hr id=hr-footer align=left><div class=social-media-banner><a href=https://github.com/KevCaz><i class="fab fab fa-github-square"></i></a><a href=https://stackoverflow.com/users/8038778><i class="fab fa-stack-overflow"></i></a><a href=https://twitter.com/KCazelles><i class="fab fa-twitter-square"></i></a><a href=http://orcid.org/0000-0001-6619-9874><i class="ai ai-orcid-square"></i></a><a href="https://scholar.google.ca/citations?user=xzvcu7cAAAAJ%26hl"><i class="ai ai-google-scholar-square"></i></a><a href=https://www.researchgate.net/profile/Kevin_Cazelles><i class="ai ai-researchgate-square"></i></a><a href=https://kevcaz.github.io/index.xml><i class="fas fa-rss-square"></i></a></div><div class=footer-custom>Website built with <a href=https://gohugo.io/>Hugo</a>.<br><i class="fas fa-code"></i>available on <a href=https://github.com/KevCaz/KevCaz.github.io><i class="fab fa-github"></i></a>.<br>Content under <a href=https://creativecommons.org/publicdomain/zero/1.0><i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-zero"></i></a>unless otherwise specified.</div></div></div></div><div class=ctn-main-content><div class=ctt-main-content><div class=article-meta><h1 id=title>Cannot boot again <code>[SOLVED]</code></h1><h3 class=date>March 18, 2019<div class=tags><i class="fas fa-tags" aria-hidden=true></i>&nbsp;
<a href=../../../tags/linux><kbd class=item-tag>Linux</kbd></a>
<a href=../../../tags/debian-testing><kbd class=item-tag>Debian Testing</kbd></a>
<a href=../../../tags/boot><kbd class=item-tag>boot</kbd></a>
<a href=../../../tags/bios><kbd class=item-tag>BIOS</kbd></a>
<a href=../../../tags/uefi><kbd class=item-tag>UEFI</kbd></a>
<a href=../../../tags/grub2><kbd class=item-tag>GRUB2</kbd></a></div></div><div class=article-main><p>Within the last two weeks, I ran into serious issues with my Debian machine. Two weeks ago, just as I described in a <a href=../../../notes/linux/cannotboot>previous post</a>, after some updates, I was not able to boot anymore. Given that everything was working very well before, I was convinced that this was an issue with <a href=http://www.gnu.org/software/grub/>GRUB2</a>, but was not able to fix it despite a very demanding quest for a solution. I was so desperate that I decided to reinstall Debian (which turned out to be a good thing as it fixed <a href=../../../notes/hardware/backlightgone/>minor issues I had with my hardware</a>.</p><p>After the re-installation (2 weeks ago) on my system, I worked without rebooting the system untill today as I decided to try to reboot. But sadly, I ran into the same issue&mldr; After a couple of minutes of intense disappointment, I rolled up my sleeves and looked for a solution once again. First thing first, I had to get a <a href=https://cdimage.debian.org/cdimage/weekly-builds/amd64/iso-dvd/>bootable stick with the Debian installer for my Levono ThinkPad</a>. If you don&rsquo;t know how to proceed, there are several tutorials online that explain how to do so:</p><ul><li>on Linux:<ul><li><a href=http://debian-facile.org/doc:install:usb-boot>Debian facile</a> 🇫🇷</li><li><a href=https://askubuntu.com/questions/372607/how-to-create-a-bootable-ubuntu-usb-flash-drive-from-terminal>askUbutu</a></li></ul></li><li>on MacOSX:<ul><li><a href=http://osxdaily.com/2015/06/05/copy-iso-to-usb-drive-mac-os-x-command/>OSXDaily</a></li><li><a href=https://tutorials.ubuntu.com/tutorial/tutorial-create-a-usb-stick-on-macos#0>Ubuntu</a>.</li></ul></li></ul><p>On the MacOSX machine I had access, I used the following command line:</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ dd <span style=color:#8be9fd;font-style:italic>bs</span><span style=color:#ff79c6>=</span>4m <span style=color:#ff79c6>if</span><span style=color:#ff79c6>=</span>Downloads/debian-testing-amd64-DVD-1.iso <span style=color:#8be9fd;font-style:italic>of</span><span style=color:#ff79c6>=</span>/dev/disk1 <span style=color:#ff79c6>&amp;&amp;</span> sync
</code></pre></td></tr></table></div></div><p>With Debian installer on my USB stick, I was able to use a GRUB2 terminal and found this post on <a href=https://www.howtoforge.com/tutorial/repair-linux-boot-with-grub-rescue/>HowtoForge</a> to better understand what I was doing. Basically, I needed to set the path to properly boot, after checking where was my file system (using the GRUB&rsquo;s <code>ls</code> command I found that it was <code>(hd0,gpt2)</code> in my case), I followed <a href=https://wiki.debian-fr.xyz/R%C3%A9installer_Grub2>these guidelines</a> 🇫🇷 and typed:</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>grub&gt; <span style=color:#8be9fd;font-style:italic>prefix</span><span style=color:#ff79c6>=(</span>hd0,gpt2<span style=color:#ff79c6>)</span>/boot/grub
grub&gt; <span style=color:#8be9fd;font-style:italic>set</span> <span style=color:#8be9fd;font-style:italic>root</span><span style=color:#ff79c6>=(</span>hd0,gpt2<span style=color:#ff79c6>)</span>
grub&gt; insmod linux
grub&gt; insmod boot
grub&gt; insmod normal
grub&gt; normal
</code></pre></td></tr></table></div></div><p>Afterwards, I was then able to access my Debian partition on the boot menu (and new entry was added to the menu displayed by the installer). Now, with this USB stick I am now able to boot even if the GRUB on my hard drive is not working properly.</p><p>The last step was to reinstall GRUB on my hard drive (the steps about is just a work around to boot with a broken GRUB). After several unsuccessful attempts, I ended up checking out the <a href=http://www.gnu.org/software/grub/manual/grub/grub.html>GRUB manual</a> and it turned out that all I had to do was to reinstall GRUB with a simple command line. First, I needed to locate the partition where the EFI system was installed:</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ fdisk -l
<span style=color:#ff79c6>[</span>...<span style=color:#ff79c6>]</span>
Device              Start        End    Sectors   Size Type
/dev/nvme0n1p1       <span style=color:#bd93f9>2048</span>    <span style=color:#bd93f9>1050623</span>    <span style=color:#bd93f9>1048576</span>   512M EFI System
/dev/nvme0n1p2    <span style=color:#bd93f9>1050624</span> <span style=color:#bd93f9>1967138815</span> <span style=color:#bd93f9>1966088192</span> 937.5G Linux filesystem
/dev/nvme0n1p3 <span style=color:#bd93f9>1967138816</span> <span style=color:#bd93f9>2000408575</span>   <span style=color:#bd93f9>33269760</span>  15.9G Linux swap
<span style=color:#ff79c6>[</span>...<span style=color:#ff79c6>]</span>
</code></pre></td></tr></table></div></div><p>and then I used <code>grub-install</code>:</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ grub-install /dev/nvme0n1p1
</code></pre></td></tr></table></div></div><h4 id=and-now-my-computer-boots-properly-->And now <strong>my computer boots properly</strong> 🎆 🏆!</h4><p>After this experience, I came to realize that one of the major issue to fix this issue was the abundance of resources that lack accuracy. On such topics, a quick search on the Internet may not be enough as there are many tutorials/answers on different websites that solve similar issues but that do not provide enough information to let the reader realize that it is actually not the very same issue. On such topics (quite advanced for somebody like me), one shall recall this: &ldquo;just read to the manual&rdquo; 😄.</p></div></div><div class=footer2><hr id=hr-footer align=left><div class=social-media-banner><a href=https://github.com/KevCaz><i class="fab fab fa-github-square"></i></a><a href=https://stackoverflow.com/users/8038778><i class="fab fa-stack-overflow"></i></a><a href=https://twitter.com/KCazelles><i class="fab fa-twitter-square"></i></a><a href=http://orcid.org/0000-0001-6619-9874><i class="ai ai-orcid-square"></i></a><a href="https://scholar.google.ca/citations?user=xzvcu7cAAAAJ%26hl"><i class="ai ai-google-scholar-square"></i></a><a href=https://www.researchgate.net/profile/Kevin_Cazelles><i class="ai ai-researchgate-square"></i></a><a href=https://kevcaz.github.io/index.xml><i class="fas fa-rss-square"></i></a></div><div class=footer-custom>Website built with <a href=https://gohugo.io/>Hugo</a>.<br><i class="fas fa-code"></i>available on <a href=https://github.com/KevCaz/KevCaz.github.io><i class="fab fa-github"></i></a>.<br>Content under <a href=https://creativecommons.org/publicdomain/zero/1.0><i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-zero"></i></a>unless otherwise specified.</div></div></div><div class=ctn-sidebar-secondary><div class=ctt-sidebar-secondary><h1><a href=#><i class="far fas fa-chevron-up"></i></a></h1><script src=../../../js/sidebar-secondary.js></script><h1><a onclick=scrollToBottom()><i class="far fas fa-chevron-down"></i></a></h1></div></div></div><script src=../../../js/sidebar-primary-dropdown.js></script><script>scrollingElement=(document.scrollingElement||document.body)
function scrollToBottom(){scrollingElement.scrollTop=scrollingElement.scrollHeight;}</script></body></html>